<!DOCTYPE HTML>
<html>
<head>
    <title>Getting Started: Serving Web Content</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <link rel="stylesheet" href="/css/edit.css">
    <link rel="stylesheet" href="/css/scrollbar.css">
    <link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet">
    <script type="text/javascript" src="/script/bold.js" defer></script>
    <script type="text/javascript" src="/script/url.js" defer></script>

</head>
<body>
<header>
    <div class="logo">
        <p>Tablet Guides</p>
    </div>
    <div class="logout">
        <form action="logout" method="post">
            <input type="submit" value="ВЫХОД"/>
            <input type="hidden" name="_csrf" value="{{_csrf.token}}">
        </form>
    </div>
</header>
<main>
    <div class="main">
        <div class="category category-add">
        <form method="post" action="/addNewCategory">
                <input type="text" class="new-cat-field" name="namecat" placeholder="Новая категория">
                <input type="submit" class="button-for-textarea add-new-cat-button" value="">
                <input type="hidden" name="_csrf" value="{{_csrf.token}}">
        </form>
        </div>
        <form method="post" action="/save" enctype="multipart/form-data">
            <div class="category category-check">
            <select class="category-input" name="categoryinput" id="category-input" placeholder="Категория">
                {{#categories}}
                    <option class="option" value="{{name}}">{{name}}</option>
                {{/categories}}
            </select>
            </div>
            <input type="text" class="head" id="head" name="head" placeholder="Заголовок" required>
            <div class="buttons">
                <input type="button" id="url" class="button-for-textarea url">
                <input type="button" id="bold" class="button-for-textarea bold">
            </div>
            <textarea class="main-text" id="main-text" name="maintext" placeholder="Основной текст" required></textarea>

            <div class="image-container">
            <input class="file" type="file" name="file">
                <div>

                </div>
            </div>

            <input type="text" class="head" id="tag" name="tag" placeholder="Теги через запятую" required>
            <div class="buttons container-save"><input class="save" type="submit" value="Сохранить"/></div>

            <input type="hidden" name="_csrf" value="{{_csrf.token}}">
            <script>
                var elements = document.querySelectorAll('.head, textarea');

                function checkValidity() {};

                for (i=0; i<elements.length; i++) {
                    (function(element) {
                        var id = element.getAttribute('id');
                        element.value = sessionStorage.getItem(id); // обязательно наличие у элементов id
                        element.oninput = function() {
                            sessionStorage.setItem(id, element.value);
                            checkValidity();
                        };
                    })(elements[i]);
                }
            </script>
        </form>
    </div>
</main>
</body>
</html>